{
  "timestamp": "2025-04-03T20:49:30.189039",
  "total_tests": 1,
  "passed_tests": 1,
  "failed_tests": 0,
  "overall_success": true,
  "execution_time_seconds": 9.95,
  "test_results": [
    {
      "test_file": "tests/test_cache_integration.py",
      "success": true,
      "stdout": "============================= test session starts ==============================\nplatform linux -- Python 3.11.10, pytest-8.3.5, pluggy-1.5.0 -- /home/runner/workspace/.pythonlibs/bin/python\ncachedir: .pytest_cache\nrootdir: /home/runner/workspace\nconfigfile: pytest.ini\nplugins: anyio-4.9.0, mock-3.14.0, flask-1.3.0\ncollecting ... collected 1 item\n\ntests/test_cache_integration.py::test_api_cache_with_mocked_db \n-------------------------------- live log call ---------------------------------\nINFO     tests.test_cache_integration:test_cache_integration.py:24 ======= STARTING API CACHE INTEGRATION TEST WITH MOCKING =======\nINFO     tests.test_cache_integration:test_cache_integration.py:69 Making first API request (should be cache miss)...\nINFO     mobile_api_routes:mobile_api_routes.py:75 Created new mobile session: 18ef32e5-9cee-4ba9-9926-482b4853a935 (mobile app: False)\nINFO     mobile_api_routes:mobile_api_routes.py:291 Mobile API: Emotion analysis request: 'APITestCacheMock123' in en\nWARNING  mobile_api_routes:mobile_api_routes.py:352 Failed to cache emotion result: (sqlite3.OperationalError) no such column: response_cache.last_hit_at\n[SQL: SELECT response_cache.\"key\" AS response_cache_key, response_cache.value AS response_cache_value, response_cache.created_at AS response_cache_created_at, response_cache.expires_at AS response_cache_expires_at, response_cache.content_type AS response_cache_content_type, response_cache.hit_count AS response_cache_hit_count, response_cache.last_hit_at AS response_cache_last_hit_at \nFROM response_cache \nWHERE response_cache.\"key\" = ?\n LIMIT ? OFFSET ?]\n[parameters: ('emotion_8459a4680d91e0e29f17caf25c85a969_en', 1, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\nINFO     tests.test_cache_integration:test_cache_integration.py:78 First response: {\n  \"cache_status\": \"miss\",\n  \"processing_time_ms\": 7,\n  \"result\": {\n    \"emotions\": {\n      \"happy\": 0.9,\n      \"neutral\": 0.1\n    },\n    \"intensity\": 0.9,\n    \"metadata\": {\n      \"confidence\": 0.9,\n      \"language\": \"en\",\n      \"processing_time_ms\": 7,\n      \"source\": \"emotion-analysis-v2\"\n    },\n    \"primary_emotion\": \"happy\",\n    \"timestamp\": \"2025-04-03T20:49:29Z\"\n  },\n  \"success\": true\n}\nINFO     tests.test_cache_integration:test_cache_integration.py:86 Verified EmotionTracker.analyze_text was called\nINFO     tests.test_cache_integration:test_cache_integration.py:90 Verified DatabaseManager.store_cached_response was called\nINFO     tests.test_cache_integration:test_cache_integration.py:93 Making second API request (should be cache hit)...\nINFO     tests.test_cache_integration:test_cache_integration.py:102 Second response: {\n  \"cache_status\": \"hit\",\n  \"processing_time_ms\": 0,\n  \"result\": {\n    \"emotions\": {\n      \"happy\": 0.9,\n      \"neutral\": 0.1\n    },\n    \"intensity\": 0.9,\n    \"metadata\": {\n      \"cache_created_at\": \"2025-04-03T20:49:29.868912\",\n      \"cache_expires_at\": \"2025-04-03T21:49:29.868919\",\n      \"cache_hit_count\": 1,\n      \"confidence\": 0.9,\n      \"language\": \"en\",\n      \"processing_time_ms\": 0,\n      \"source\": \"emotion-analysis-v2\"\n    },\n    \"primary_emotion\": \"happy\",\n    \"timestamp\": \"2025-04-03T20:49:29Z\"\n  },\n  \"success\": true\n}\nINFO     tests.test_cache_integration:test_cache_integration.py:115 Verified EmotionTracker.analyze_text was NOT called a second time (used cache)\nINFO     tests.test_cache_integration:test_cache_integration.py:117 ======= TEST PASSED =======\nPASSED                                                                   [100%]\n\n=============================== warnings summary ===============================\ndatabase/models.py:7\n  /home/runner/workspace/database/models.py:7: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\n-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html\n========================= 1 passed, 1 warning in 0.05s =========================\n",
      "stderr": "",
      "return_code": 0,
      "timestamp": "2025-04-03T20:49:30.189020"
    }
  ]
}